<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - NIA Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --bg-dark: #0f172a;
            --bg-card: #1e293b;
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --border: #334155;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --code-bg: #1e293b;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 280px;
            background: var(--bg-card);
            border-right: 1px solid var(--border);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            padding: 2rem 0;
        }

        .logo {
            padding: 0 1.5rem 2rem;
            border-bottom: 1px solid var(--border);
            margin-bottom: 2rem;
        }

        .logo h1 {
            font-size: 1.75rem;
            color: var(--primary);
            font-weight: 800;
        }

        .logo p {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-top: 0.25rem;
        }

        .nav-link {
            display: block;
            padding: 0.75rem 1.5rem;
            color: var(--text);
            text-decoration: none;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            background: rgba(99, 102, 241, 0.1);
            border-left-color: var(--primary);
        }

        .nav-link.active {
            background: rgba(99, 102, 241, 0.15);
            border-left-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .content {
            margin-left: 280px;
            flex: 1;
            padding: 3rem;
            max-width: 1200px;
        }

        .header {
            margin-bottom: 3rem;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, var(--primary), #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        section {
            margin-bottom: 4rem;
        }

        h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--border);
        }

        h3 {
            font-size: 1.5rem;
            margin: 2rem 0 1rem;
            color: var(--primary);
        }

        .endpoint {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 0.75rem;
            padding: 2rem;
            margin-bottom: 2rem;
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .http-method {
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            font-weight: 700;
            font-size: 0.875rem;
            margin-right: 1rem;
        }

        .method-post { background: var(--success); color: white; }
        .method-get { background: var(--primary); color: white; }
        .method-put { background: var(--warning); color: white; }
        .method-delete { background: var(--danger); color: white; }

        .endpoint-path {
            font-family: 'Monaco', monospace;
            font-size: 1.125rem;
            color: var(--text);
        }

        pre {
            background: var(--code-bg);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            overflow-x: auto;
            margin-bottom: 1.5rem;
        }

        code {
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 0.875rem;
            color: #a5b4fc;
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-right: 0.5rem;
        }

        .badge-primary { background: rgba(99, 102, 241, 0.2); color: #a5b4fc; }
        .badge-success { background: rgba(16, 185, 129, 0.2); color: #6ee7b7; }

        table {
            width: 100%;
            border-collapse: collapse;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            margin-bottom: 1.5rem;
        }

        th, td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: rgba(99, 102, 241, 0.1);
            font-weight: 600;
            color: var(--primary);
        }

        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
        }

        p, ul {
            margin-bottom: 1rem;
            color: var(--text-muted);
        }

        ul {
            margin-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        @media (max-width: 768px) {
            .sidebar { transform: translateX(-100%); }
            .content { margin-left: 0; padding: 1.5rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="logo">
                <h1>üß† NIA</h1>
                <p>API Documentation</p>
            </div>

            <a href="index.html" class="nav-link">‚Üê Voltar para Docs</a>
            <a href="#overview" class="nav-link active">Overview</a>
            <a href="#authentication" class="nav-link">Autentica√ß√£o</a>
            <a href="#courses" class="nav-link">Courses</a>
            <a href="#modules" class="nav-link">Modules</a>
            <a href="#progress" class="nav-link">Progress</a>
            <a href="#quiz" class="nav-link">Quiz</a>
            <a href="#errors" class="nav-link">Erros</a>
        </nav>

        <!-- Content -->
        <main class="content">
            <!-- Header -->
            <div class="header">
                <h1>üîå API Reference</h1>
                <p class="subtitle">Documenta√ß√£o completa da API REST</p>
                <div>
                    <span class="badge badge-primary">v2.0</span>
                    <span class="badge badge-success">FastAPI</span>
                </div>
            </div>

            <!-- Overview -->
            <section id="overview">
                <h2>üéØ Overview</h2>
                
                <div class="card">
                    <h3>Base URL</h3>
                    <pre><code>http://localhost:8000/api</code></pre>
                    
                    <h3>Caracter√≠sticas</h3>
                    <ul>
                        <li>‚úÖ RESTful API</li>
                        <li>‚úÖ JSON responses</li>
                        <li>‚úÖ Documenta√ß√£o interativa (Swagger)</li>
                        <li>‚úÖ Valida√ß√£o com Pydantic</li>
                    </ul>

                    <h3>Documenta√ß√£o Interativa</h3>
                    <ul>
                        <li><strong>Swagger UI:</strong> <code>http://localhost:8000/docs</code></li>
                        <li><strong>ReDoc:</strong> <code>http://localhost:8000/redoc</code></li>
                    </ul>
                </div>
            </section>

            <!-- Authentication -->
            <section id="authentication">
                <h2>üîê Autentica√ß√£o</h2>
                <p><strong>Status:</strong> Fase Futura (OAuth Google/LinkedIn)</p>
                
                <div class="card">
                    <p>Atualmente, a API n√£o requer autentica√ß√£o. Em vers√µes futuras, ser√° implementado:</p>
                    <ul>
                        <li>OAuth 2.0 (Google e LinkedIn)</li>
                        <li>JWT tokens</li>
                        <li>Rate limiting por usu√°rio</li>
                    </ul>
                </div>
            </section>

            <!-- Courses -->
            <section id="courses">
                <h2>üìö Courses</h2>

                <!-- POST Generate Course -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-post">POST</span>
                        <span class="endpoint-path">/api/courses/generate</span>
                    </div>

                    <p>Gera um curso completo usando o sistema Multi-Agent.</p>

                    <h4>Request Body</h4>
                    <pre><code>{
  "topic": "Python Avan√ßado",
  "level": "intermediate",
  "duration_hours": 40
}</code></pre>

                    <h4>Parameters</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Campo</th>
                                <th>Tipo</th>
                                <th>Required</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>topic</code></td>
                                <td>string</td>
                                <td>‚úÖ</td>
                                <td>Tema do curso</td>
                            </tr>
                            <tr>
                                <td><code>level</code></td>
                                <td>string</td>
                                <td>‚ùå</td>
                                <td>basic, intermediate, advanced</td>
                            </tr>
                            <tr>
                                <td><code>duration_hours</code></td>
                                <td>integer</td>
                                <td>‚ùå</td>
                                <td>Dura√ß√£o estimada (padr√£o: 40)</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Response (200 OK)</h4>
                    <pre><code>{
  "status": "success",
  "course_id": 42,
  "data": {
    "course": {
      "id": 42,
      "title": "Python Avan√ßado",
      "level": "intermediate",
      "modules_count": 8
    },
    "modules": [
      {
        "id": 1,
        "title": "Decorators Avan√ßados",
        "quiz": { "total_points": 100 }
      }
    ]
  },
  "generation_time": 287,
  "agents_used": ["Python Expert", "Reviewer", "Quiz Master"]
}</code></pre>

                    <h4>cURL Example</h4>
                    <pre><code>curl -X POST http://localhost:8000/api/courses/generate \
  -H "Content-Type: application/json" \
  -d '{
    "topic": "Python Avan√ßado",
    "level": "intermediate",
    "duration_hours": 40
  }'</code></pre>
                </div>

                <!-- GET List Courses -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-get">GET</span>
                        <span class="endpoint-path">/api/courses</span>
                    </div>

                    <p>Lista todos os cursos.</p>

                    <h4>Query Parameters</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Par√¢metro</th>
                                <th>Tipo</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>status</code></td>
                                <td>string</td>
                                <td>Filtrar por status (draft, published)</td>
                            </tr>
                            <tr>
                                <td><code>level</code></td>
                                <td>string</td>
                                <td>Filtrar por n√≠vel</td>
                            </tr>
                            <tr>
                                <td><code>limit</code></td>
                                <td>integer</td>
                                <td>N√∫mero de resultados (padr√£o: 20)</td>
                            </tr>
                            <tr>
                                <td><code>offset</code></td>
                                <td>integer</td>
                                <td>Pagina√ß√£o</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Response (200 OK)</h4>
                    <pre><code>{
  "total": 42,
  "limit": 20,
  "offset": 0,
  "courses": [
    {
      "id": 1,
      "title": "Python Avan√ßado",
      "level": "intermediate",
      "duration_hours": 40,
      "modules_count": 8,
      "status": "published",
      "created_at": "2025-11-22T10:00:00Z"
    }
  ]
}</code></pre>
                </div>

                <!-- GET Single Course -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-get">GET</span>
                        <span class="endpoint-path">/api/courses/{id}</span>
                    </div>

                    <p>Retorna detalhes de um curso espec√≠fico.</p>

                    <h4>Path Parameters</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Par√¢metro</th>
                                <th>Tipo</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>id</code></td>
                                <td>integer</td>
                                <td>ID do curso</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Response (200 OK)</h4>
                    <pre><code>{
  "id": 42,
  "title": "Python Avan√ßado",
  "description": "Domine conceitos avan√ßados...",
  "level": "intermediate",
  "duration_hours": 40,
  "prerequisites": ["Python b√°sico", "POO"],
  "modules": [
    {
      "id": 1,
      "title": "Decorators Avan√ßados",
      "duration_hours": 5
    }
  ],
  "created_at": "2025-11-22T10:00:00Z"
}</code></pre>
                </div>

                <!-- DELETE Course -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-delete">DELETE</span>
                        <span class="endpoint-path">/api/courses/{id}</span>
                    </div>

                    <p>Deleta um curso (CASCADE: deleta m√≥dulos e progresso).</p>

                    <h4>Response (204 No Content)</h4>
                </div>
            </section>

            <!-- Modules -->
            <section id="modules">
                <h2>üìñ Modules</h2>

                <!-- GET Module -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-get">GET</span>
                        <span class="endpoint-path">/api/modules/{id}</span>
                    </div>

                    <p>Retorna conte√∫do completo de um m√≥dulo.</p>

                    <h4>Response (200 OK)</h4>
                    <pre><code>{
  "id": 1,
  "course_id": 42,
  "module_index": 1,
  "title": "Decorators Avan√ßados",
  "content": "# Decorators\n\nDecorators s√£o...",
  "examples": [
    {
      "title": "Simple Decorator",
      "code": "def my_decorator(func)...",
      "output": "..."
    }
  ],
  "exercises": [...],
  "quiz": {
    "questions": [...]
  },
  "review_score": 8.5
}</code></pre>
                </div>
            </section>

            <!-- Progress -->
            <section id="progress">
                <h2>üìä Progress</h2>

                <!-- POST Start Module -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-post">POST</span>
                        <span class="endpoint-path">/api/progress/start-module</span>
                    </div>

                    <p>Marca m√≥dulo como iniciado.</p>

                    <h4>Request Body</h4>
                    <pre><code>{
  "user_id": "user_123",
  "module_id": 5
}</code></pre>

                    <h4>Response (201 Created)</h4>
                    <pre><code>{
  "progress_id": 789,
  "status": "in_progress",
  "started_at": "2025-11-22T14:00:00Z"
}</code></pre>
                </div>

                <!-- POST Complete Module -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-post">POST</span>
                        <span class="endpoint-path">/api/progress/complete-module</span>
                    </div>

                    <p>Marca m√≥dulo como completo.</p>

                    <h4>Request Body</h4>
                    <pre><code>{
  "user_id": "user_123",
  "module_id": 5,
  "time_spent_minutes": 120
}</code></pre>
                </div>

                <!-- GET User Progress -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-get">GET</span>
                        <span class="endpoint-path">/api/progress/user/{user_id}</span>
                    </div>

                    <p>Retorna todo o progresso de um usu√°rio.</p>

                    <h4>Response (200 OK)</h4>
                    <pre><code>{
  "user_id": "user_123",
  "total_courses": 3,
  "completed_modules": 12,
  "total_points": 1250,
  "courses": [
    {
      "course_id": 42,
      "course_title": "Python Avan√ßado",
      "progress_percentage": 37.5,
      "modules_completed": 3,
      "modules_total": 8
    }
  ]
}</code></pre>
                </div>
            </section>

            <!-- Quiz -->
            <section id="quiz">
                <h2>üéØ Quiz</h2>

                <!-- POST Submit Quiz -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-post">POST</span>
                        <span class="endpoint-path">/api/quiz/submit</span>
                    </div>

                    <p>Submete respostas do quiz e retorna an√°lise do Tutor Agent.</p>

                    <h4>Request Body</h4>
                    <pre><code>{
  "user_id": "user_123",
  "module_id": 5,
  "answers": [
    {"question_id": 1, "answer": "B"},
    {"question_id": 2, "answer": "C"},
    {"question_id": 3, "answer": "A"}
  ]
}</code></pre>

                    <h4>Response (200 OK)</h4>
                    <pre><code>{
  "quiz_id": 456,
  "score": 75,
  "total_points": 100,
  "passed": true,
  "correct_answers": 6,
  "total_questions": 8,
  "points_earned": 100,
  "tutor_analysis": {
    "strengths": ["Domina conceitos b√°sicos"],
    "weaknesses": ["Dificuldade com decorators"],
    "recommendations": [
      "Revisar se√ß√£o 3.2",
      "Praticar exerc√≠cios 5-7"
    ],
    "ready_for_next_module": true
  }
}</code></pre>
                </div>

                <!-- GET Quiz Results -->
                <div class="endpoint">
                    <div class="endpoint-header">
                        <span class="http-method method-get">GET</span>
                        <span class="endpoint-path">/api/quiz/{module_id}/results</span>
                    </div>

                    <p>Retorna resultados de quiz de um m√≥dulo.</p>

                    <h4>Query Parameters</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Par√¢metro</th>
                                <th>Tipo</th>
                                <th>Descri√ß√£o</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>user_id</code></td>
                                <td>string</td>
                                <td>ID do usu√°rio</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Errors -->
            <section id="errors">
                <h2>‚ö†Ô∏è C√≥digos de Erro</h2>

                <table>
                    <thead>
                        <tr>
                            <th>C√≥digo</th>
                            <th>Descri√ß√£o</th>
                            <th>Exemplo</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>400</code></td>
                            <td>Bad Request</td>
                            <td>Par√¢metros inv√°lidos</td>
                        </tr>
                        <tr>
                            <td><code>404</code></td>
                            <td>Not Found</td>
                            <td>Curso n√£o encontrado</td>
                        </tr>
                        <tr>
                            <td><code>422</code></td>
                            <td>Validation Error</td>
                            <td>Dados inv√°lidos</td>
                        </tr>
                        <tr>
                            <td><code>500</code></td>
                            <td>Internal Server Error</td>
                            <td>Erro no servidor</td>
                        </tr>
                    </tbody>
                </table>

                <h4>Exemplo de Erro</h4>
                <pre><code>{
  "detail": "Course not found",
  "status_code": 404
}</code></pre>
            </section>

            <!-- Footer -->
            <div style="text-align: center; padding: 3rem 0; border-top: 1px solid var(--border); margin-top: 4rem;">
                <p style="color: var(--text-muted);">
                    <a href="index.html" style="color: var(--primary); text-decoration: none;">‚Üê Voltar para Documenta√ß√£o Principal</a>
                </p>
                <p style="margin-top: 1rem; color: var(--text-muted);">
                    NIA Platform ¬© 2025 | API v2.0
                </p>
            </div>

        </main>
    </div>

    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                    document.querySelectorAll('.nav-link').forEach(link => {
                        link.classList.remove('active');
                    });
                    this.classList.add('active');
                }
            });
        });

        const sections = document.querySelectorAll('section[id]');
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === `#${current}`) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>